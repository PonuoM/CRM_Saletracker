# ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏£‡∏∞‡∏ö‡∏ö

## ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°

‡∏£‡∏∞‡∏ö‡∏ö CRM SalesTracker ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏û‡∏£‡∏µ‡∏°‡πà‡∏≤‡πÅ‡∏û‡∏™‡∏ä‡∏±‡πà‡∏ô 49 ‡∏à‡∏≥‡∏Å‡∏±‡∏î ‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏° MVC (Model-View-Controller) ‡∏î‡πâ‡∏ß‡∏¢ PHP Backend, MySQL Database ‡πÅ‡∏•‡∏∞ Responsive Frontend ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ö‡∏ô‡∏ó‡∏∏‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå

## ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö

### ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend      ‚îÇ    ‚îÇ   Backend       ‚îÇ    ‚îÇ   Database      ‚îÇ
‚îÇ   (HTML/CSS/JS) ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (PHP)         ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (MySQL)       ‚îÇ
‚îÇ   - Dashboard   ‚îÇ    ‚îÇ   - Controllers ‚îÇ    ‚îÇ   - Tables      ‚îÇ
‚îÇ   - Forms       ‚îÇ    ‚îÇ   - Models      ‚îÇ    ‚îÇ   - Relations   ‚îÇ
‚îÇ   - Reports     ‚îÇ    ‚îÇ   - Services    ‚îÇ    ‚îÇ   - Indexes     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ
                                ‚ñº
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                       ‚îÇ   Cron Jobs     ‚îÇ
                       ‚îÇ   - Auto Recall ‚îÇ
                       ‚îÇ   - Status Upd  ‚îÇ
                       ‚îÇ   - Cleanup     ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ

- **Backend**: PHP 7.4+
- **Database**: MySQL 8.0+
- **Frontend**: HTML5, CSS3, JavaScript (ES6+)
- **Framework**: Bootstrap 5 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Responsive Design
- **Charts**: Chart.js ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
- **Icons**: Font Awesome
- **Server**: Apache (XAMPP ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Development)

## ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö UX/UI

### ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö

1. **Mobile-First Approach**: ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Ç‡∏¢‡∏≤‡∏¢‡πÑ‡∏õ‡πÄ‡∏î‡∏™‡∏Å‡πå‡∏ó‡πá‡∏≠‡∏õ
2. **Role-Based Interface**: ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
3. **Data-Driven Dashboard**: ‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
4. **Intuitive Navigation**: ‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢
5. **Consistent Design Language**: ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö

### Color Scheme

```css
:root {
  --primary-color: #2563eb;      /* Blue - Primary actions */
  --secondary-color: #64748b;    /* Gray - Secondary elements */
  --success-color: #10b981;      /* Green - Success states */
  --warning-color: #f59e0b;      /* Yellow - Warning states */
  --danger-color: #ef4444;       /* Red - Danger/Error states */
  --hot-color: #dc2626;          /* Hot customers üî• */
  --warm-color: #f59e0b;         /* Warm customers üå§Ô∏è */
  --cold-color: #3b82f6;         /* Cold customers ‚ùÑÔ∏è */
  --frozen-color: #6b7280;       /* Frozen customers üßä */
}
```

### Layout Structure

#### 1. Header Navigation
```html
<header class="navbar">
  <div class="navbar-brand">
    <img src="logo.png" alt="Prima49 CRM">
    <span>SalesTracker</span>
  </div>
  <nav class="navbar-menu">
    <!-- Role-based menu items -->
  </nav>
  <div class="navbar-user">
    <span>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, [‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ]</span>
    <button class="logout-btn">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
  </div>
</header>
```

#### 2. Sidebar Navigation (Desktop)
```html
<aside class="sidebar">
  <ul class="nav-menu">
    <li><a href="/dashboard">üìä ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</a></li>
    <li><a href="/customers">üë• ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</a></li>
    <li><a href="/orders">üõí ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</a></li>
    <li><a href="/reports">üìà ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</a></li>
    <!-- Admin only -->
    <li><a href="/admin">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</a></li>
  </ul>
</aside>
```

#### 3. Main Content Area
```html
<main class="main-content">
  <div class="page-header">
    <h1>‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</h1>
    <div class="breadcrumb">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å > ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</div>
  </div>
  <div class="content-body">
    <!-- Page specific content -->
  </div>
</main>
```

### ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏´‡∏•‡∏±‡∏Å‡∏ï‡∏≤‡∏°‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó

#### 1. Dashboard - Admin/Supervisor
```html
<div class="dashboard-grid">
  <!-- KPI Cards -->
  <div class="kpi-cards">
    <div class="kpi-card">
      <h3>‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
      <div class="kpi-value">1,234</div>
      <div class="kpi-change">+12% ‡∏à‡∏≤‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß</div>
    </div>
    <div class="kpi-card">
      <h3>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°</h3>
      <div class="kpi-value">‡∏ø2,456,789</div>
      <div class="kpi-change">+8% ‡∏à‡∏≤‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß</div>
    </div>
    <div class="kpi-card">
      <h3>‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</h3>
      <div class="kpi-value">‡∏ø1,987</div>
      <div class="kpi-change">-3% ‡∏à‡∏≤‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß</div>
    </div>
  </div>
  
  <!-- Charts -->
  <div class="chart-container">
    <canvas id="salesChart"></canvas>
  </div>
  
  <!-- Team Performance -->
  <div class="team-performance">
    <table class="performance-table">
      <thead>
        <tr>
          <th>‡∏ä‡∏∑‡πà‡∏≠</th>
          <th>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢</th>
          <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏ó‡∏£</th>
          <th>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</th>
        </tr>
      </thead>
      <tbody>
        <!-- Dynamic data -->
      </tbody>
    </table>
  </div>
</div>
```

#### 2. Dashboard - Telesales
```html
<div class="telesales-dashboard">
  <!-- Personal KPIs -->
  <div class="personal-kpis">
    <div class="kpi-card">
      <h3>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</h3>
      <div class="kpi-value">‡∏ø45,678</div>
    </div>
    <div class="kpi-card">
      <h3>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏°‡∏∑‡∏≠</h3>
      <div class="kpi-value">23</div>
    </div>
    <div class="kpi-card">
      <h3>‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
      <div class="kpi-value">5</div>
    </div>
  </div>
  
  <!-- Do Section -->
  <div class="do-section">
    <h2>‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h2>
    <div class="urgent-customers">
      <!-- List of urgent actions -->
    </div>
  </div>
</div>
```

#### 3. Customer Management Interface
```html
<div class="customer-management">
  <!-- Tabs -->
  <div class="tab-navigation">
    <button class="tab-btn active" data-tab="do">Do</button>
    <button class="tab-btn" data-tab="new">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</button>
    <button class="tab-btn" data-tab="followup">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°</button>
    <button class="tab-btn" data-tab="existing">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤</button>
  </div>
  
  <!-- Filters -->
  <div class="filters">
    <select id="tempFilter">
      <option value="">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
      <option value="hot">üî• Hot</option>
      <option value="warm">üå§Ô∏è Warm</option>
      <option value="cold">‚ùÑÔ∏è Cold</option>
      <option value="frozen">üßä Frozen</option>
    </select>
    <select id="gradeFilter">
      <option value="">‡πÄ‡∏Å‡∏£‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
      <option value="A+">A+</option>
      <option value="A">A</option>
      <option value="B">B</option>
      <option value="C">C</option>
      <option value="D">D</option>
    </select>
    <select id="provinceFilter">
      <option value="">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
      <!-- Dynamic provinces -->
    </select>
  </div>
  
  <!-- Customer Table -->
  <div class="customer-table">
    <table class="data-table">
      <thead>
        <tr>
          <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö</th>
          <th>‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th>
          <th>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</th>
          <th>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</th>
          <th>‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠</th>
          <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
          <th>‡πÄ‡∏Å‡∏£‡∏î</th>
          <th>‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</th>
          <th>‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</th>
        </tr>
      </thead>
      <tbody>
        <!-- Dynamic customer data -->
      </tbody>
    </table>
  </div>
</div>
```

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Database Schema)

### ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå

#### 1. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á users
```sql
CREATE TABLE users (
    user_id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    full_name VARCHAR(100) NOT NULL,
    email VARCHAR(100),
    phone VARCHAR(20),
    role_id INT NOT NULL,
    company_id INT,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    last_login TIMESTAMP NULL,
    
    FOREIGN KEY (role_id) REFERENCES roles(role_id),
    FOREIGN KEY (company_id) REFERENCES companies(company_id),
    INDEX idx_username (username),
    INDEX idx_role (role_id),
    INDEX idx_active (is_active)
);
```

#### 2. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á roles
```sql
CREATE TABLE roles (
    role_id INT PRIMARY KEY AUTO_INCREMENT,
    role_name VARCHAR(50) NOT NULL,
    role_description TEXT,
    permissions JSON, -- Store permissions as JSON
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_role_name (role_name)
);

-- Insert default roles
INSERT INTO roles (role_name, role_description, permissions) VALUES
('super_admin', 'Super Administrator', '["all"]'),
('admin', 'Company Administrator', '["user_management", "product_management", "data_import", "reports"]'),
('supervisor', 'Team Supervisor', '["team_overview", "lead_distribution", "team_reports"]'),
('telesales', 'Telesales Representative', '["customer_management", "order_creation", "personal_reports"]');
```

#### 3. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á companies
```sql
CREATE TABLE companies (
    company_id INT PRIMARY KEY AUTO_INCREMENT,
    company_name VARCHAR(100) NOT NULL,
    company_code VARCHAR(20) UNIQUE,
    address TEXT,
    phone VARCHAR(20),
    email VARCHAR(100),
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_company_code (company_code)
);
```

#### 4. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á customers
```sql
CREATE TABLE customers (
    customer_id INT PRIMARY KEY AUTO_INCREMENT,
    customer_code VARCHAR(50) UNIQUE,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50) NOT NULL,
    phone VARCHAR(20),
    email VARCHAR(100),
    address TEXT,
    district VARCHAR(50),
    province VARCHAR(50),
    postal_code VARCHAR(10),
    
    -- Customer Status
    temperature_status ENUM('hot', 'warm', 'cold', 'frozen') DEFAULT 'hot',
    customer_grade ENUM('A+', 'A', 'B', 'C', 'D') DEFAULT 'D',
    total_purchase_amount DECIMAL(12,2) DEFAULT 0.00,
    
    -- Assignment and Tracking
    assigned_to INT NULL, -- Current telesales assigned
    basket_type ENUM('distribution', 'waiting', 'assigned') DEFAULT 'distribution',
    assigned_at TIMESTAMP NULL,
    last_contact_at TIMESTAMP NULL,
    next_followup_at TIMESTAMP NULL,
    recall_at TIMESTAMP NULL, -- When customer should be recalled
    
    -- Metadata
    source VARCHAR(50), -- facebook, import, manual, etc.
    notes TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (assigned_to) REFERENCES users(user_id),
    INDEX idx_assigned_to (assigned_to),
    INDEX idx_basket_type (basket_type),
    INDEX idx_temperature (temperature_status),
    INDEX idx_grade (customer_grade),
    INDEX idx_province (province),
    INDEX idx_recall_at (recall_at),
    INDEX idx_next_followup (next_followup_at),
    INDEX idx_phone (phone),
    INDEX idx_created_at (created_at)
);
```

#### 5. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á products
```sql
CREATE TABLE products (
    product_id INT PRIMARY KEY AUTO_INCREMENT,
    product_code VARCHAR(50) UNIQUE NOT NULL,
    product_name VARCHAR(200) NOT NULL,
    category VARCHAR(100),
    description TEXT,
    unit VARCHAR(20) DEFAULT '‡∏ä‡∏¥‡πâ‡∏ô',
    cost_price DECIMAL(10,2) DEFAULT 0.00,
    selling_price DECIMAL(10,2) NOT NULL,
    stock_quantity INT DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_product_code (product_code),
    INDEX idx_category (category),
    INDEX idx_active (is_active)
);
```

#### 6. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á orders
```sql
CREATE TABLE orders (
    order_id INT PRIMARY KEY AUTO_INCREMENT,
    order_number VARCHAR(50) UNIQUE NOT NULL,
    customer_id INT NOT NULL,
    created_by INT NOT NULL, -- Telesales who created the order
    
    -- Order Details
    order_date DATE NOT NULL,
    total_amount DECIMAL(12,2) NOT NULL,
    discount_amount DECIMAL(10,2) DEFAULT 0.00,
    discount_percentage DECIMAL(5,2) DEFAULT 0.00,
    net_amount DECIMAL(12,2) NOT NULL,
    
    -- Payment and Delivery
    payment_method ENUM('cash', 'transfer', 'credit', 'other') DEFAULT 'cash',
    payment_status ENUM('pending', 'paid', 'partial', 'cancelled') DEFAULT 'pending',
    delivery_date DATE,
    delivery_address TEXT,
    delivery_status ENUM('pending', 'shipped', 'delivered', 'cancelled') DEFAULT 'pending',
    
    -- Metadata
    notes TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (customer_id) REFERENCES customers(customer_id),
    FOREIGN KEY (created_by) REFERENCES users(user_id),
    INDEX idx_order_number (order_number),
    INDEX idx_customer_id (customer_id),
    INDEX idx_created_by (created_by),
    INDEX idx_order_date (order_date),
    INDEX idx_payment_status (payment_status),
    INDEX idx_delivery_status (delivery_status)
);
```

#### 7. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á order_details
```sql
CREATE TABLE order_details (
    detail_id INT PRIMARY KEY AUTO_INCREMENT,
    order_id INT NOT NULL,
    product_id INT NOT NULL,
    quantity INT NOT NULL,
    unit_price DECIMAL(10,2) NOT NULL,
    total_price DECIMAL(12,2) NOT NULL,
    discount_amount DECIMAL(10,2) DEFAULT 0.00,
    net_price DECIMAL(12,2) NOT NULL,
    
    FOREIGN KEY (order_id) REFERENCES orders(order_id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES products(product_id),
    INDEX idx_order_id (order_id),
    INDEX idx_product_id (product_id)
);
```

#### 8. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á call_logs
```sql
CREATE TABLE call_logs (
    log_id INT PRIMARY KEY AUTO_INCREMENT,
    customer_id INT NOT NULL,
    user_id INT NOT NULL,
    call_type ENUM('outbound', 'inbound') DEFAULT 'outbound',
    call_status ENUM('answered', 'no_answer', 'busy', 'invalid') NOT NULL,
    call_result ENUM('interested', 'not_interested', 'callback', 'order', 'complaint') NULL,
    duration_minutes INT DEFAULT 0,
    notes TEXT,
    next_action VARCHAR(200),
    next_followup_at TIMESTAMP NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    FOREIGN KEY (customer_id) REFERENCES customers(customer_id),
    FOREIGN KEY (user_id) REFERENCES users(user_id),
    INDEX idx_customer_id (customer_id),
    INDEX idx_user_id (user_id),
    INDEX idx_call_date (created_at),
    INDEX idx_next_followup (next_followup_at)
);
```

#### 9. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á customer_activities
```sql
CREATE TABLE customer_activities (
    activity_id INT PRIMARY KEY AUTO_INCREMENT,
    customer_id INT NOT NULL,
    user_id INT NOT NULL,
    activity_type ENUM('status_change', 'assignment', 'call', 'order', 'note', 'recall') NOT NULL,
    activity_description TEXT NOT NULL,
    old_value VARCHAR(200),
    new_value VARCHAR(200),
    metadata JSON, -- Additional activity data
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    FOREIGN KEY (customer_id) REFERENCES customers(customer_id),
    FOREIGN KEY (user_id) REFERENCES users(user_id),
    INDEX idx_customer_id (customer_id),
    INDEX idx_user_id (user_id),
    INDEX idx_activity_type (activity_type),
    INDEX idx_created_at (created_at)
);
```

#### 10. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á sales_history
```sql
CREATE TABLE sales_history (
    history_id INT PRIMARY KEY AUTO_INCREMENT,
    customer_id INT NOT NULL,
    user_id INT NOT NULL,
    assigned_at TIMESTAMP NOT NULL,
    unassigned_at TIMESTAMP NULL,
    reason VARCHAR(200), -- Why customer was unassigned
    total_orders INT DEFAULT 0,
    total_sales DECIMAL(12,2) DEFAULT 0.00,
    is_current BOOLEAN DEFAULT TRUE,
    
    FOREIGN KEY (customer_id) REFERENCES customers(customer_id),
    FOREIGN KEY (user_id) REFERENCES users(user_id),
    INDEX idx_customer_id (customer_id),
    INDEX idx_user_id (user_id),
    INDEX idx_assigned_at (assigned_at),
    INDEX idx_is_current (is_current)
);
```

#### 11. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á system_settings
```sql
CREATE TABLE system_settings (
    setting_id INT PRIMARY KEY AUTO_INCREMENT,
    setting_key VARCHAR(100) UNIQUE NOT NULL,
    setting_value TEXT,
    setting_type ENUM('string', 'number', 'boolean', 'json') DEFAULT 'string',
    description TEXT,
    is_editable BOOLEAN DEFAULT TRUE,
    updated_by INT,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (updated_by) REFERENCES users(user_id),
    INDEX idx_setting_key (setting_key)
);

-- Insert default settings
INSERT INTO system_settings (setting_key, setting_value, setting_type, description) VALUES
('customer_grade_a_plus', '50000', 'number', 'Minimum purchase amount for A+ grade'),
('customer_grade_a', '10000', 'number', 'Minimum purchase amount for A grade'),
('customer_grade_b', '5000', 'number', 'Minimum purchase amount for B grade'),
('customer_grade_c', '2000', 'number', 'Minimum purchase amount for C grade'),
('new_customer_recall_days', '30', 'number', 'Days before recalling new customers'),
('existing_customer_recall_days', '90', 'number', 'Days before recalling existing customers'),
('waiting_basket_days', '30', 'number', 'Days customers stay in waiting basket');
```

### ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á

#### Primary Relationships
```
users (1) ‚Üê‚Üí (N) customers (assigned_to)
customers (1) ‚Üê‚Üí (N) orders
orders (1) ‚Üê‚Üí (N) order_details
products (1) ‚Üê‚Üí (N) order_details
customers (1) ‚Üê‚Üí (N) call_logs
customers (1) ‚Üê‚Üí (N) customer_activities
customers (1) ‚Üê‚Üí (N) sales_history
users (1) ‚Üê‚Üí (N) call_logs
users (1) ‚Üê‚Üí (N) customer_activities
users (1) ‚Üê‚Üí (N) sales_history
roles (1) ‚Üê‚Üí (N) users
companies (1) ‚Üê‚Üí (N) users
```

#### Business Logic Relationships
```
Customer Lifecycle:
Distribution Basket ‚Üí Assigned ‚Üí Working ‚Üí Order/Recall
                 ‚Üë                    ‚Üì
                 ‚Üê Waiting Basket ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ
```

## Cron Jobs ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

### 1. Customer Recall Job
```php
<?php
// File: /cron/customer_recall.php
// Run every hour: 0 * * * * php /path/to/cron/customer_recall.php

class CustomerRecallJob {
    
    public function run() {
        $this->recallNewCustomers();
        $this->recallExistingCustomers();
        $this->moveFromWaitingToDistribution();
        $this->logActivity();
    }
    
    /**
     * Recall new customers who haven't been updated in 30 days
     */
    private function recallNewCustomers() {
        $sql = "
            UPDATE customers 
            SET basket_type = 'distribution',
                assigned_to = NULL,
                recall_at = NOW()
            WHERE basket_type = 'assigned'
            AND assigned_at < DATE_SUB(NOW(), INTERVAL 30 DAY)
            AND customer_id NOT IN (
                SELECT DISTINCT customer_id 
                FROM orders 
                WHERE created_at > assigned_at
            )
            AND customer_id NOT IN (
                SELECT DISTINCT customer_id 
                FROM call_logs 
                WHERE created_at > assigned_at 
                AND call_result IN ('interested', 'callback', 'order')
            )
        ";
        
        $affected = $this->db->execute($sql);
        
        // Log activities for recalled customers
        if ($affected > 0) {
            $this->logCustomerRecall('new_customer_timeout', $affected);
        }
    }
    
    /**
     * Recall existing customers with no orders in 90 days
     */
    private function recallExistingCustomers() {
        $sql = "
            UPDATE customers 
            SET basket_type = 'waiting',
                assigned_to = NULL,
                recall_at = NOW()
            WHERE basket_type = 'assigned'
            AND customer_id IN (
                SELECT customer_id FROM orders 
                GROUP BY customer_id 
                HAVING MAX(order_date) < DATE_SUB(NOW(), INTERVAL 90 DAY)
            )
        ";
        
        $affected = $this->db->execute($sql);
        
        if ($affected > 0) {
            $this->logCustomerRecall('existing_customer_inactive', $affected);
        }
    }
    
    /**
     * Move customers from waiting basket to distribution after 30 days
     */
    private function moveFromWaitingToDistribution() {
        $sql = "
            UPDATE customers 
            SET basket_type = 'distribution'
            WHERE basket_type = 'waiting'
            AND recall_at < DATE_SUB(NOW(), INTERVAL 30 DAY)
        ";
        
        $affected = $this->db->execute($sql);
        
        if ($affected > 0) {
            $this->logCustomerRecall('waiting_to_distribution', $affected);
        }
    }
}
```

### 2. Customer Grade Update Job
```php
<?php
// File: /cron/update_customer_grades.php
// Run daily at 2 AM: 0 2 * * * php /path/to/cron/update_customer_grades.php

class CustomerGradeUpdateJob {
    
    public function run() {
        $this->updateCustomerGrades();
        $this->updateTemperatureStatus();
    }
    
    private function updateCustomerGrades() {
        // Get grade thresholds from settings
        $grades = $this->getGradeSettings();
        
        // Update customer grades based on total purchase amount
        $sql = "
            UPDATE customers c
            SET customer_grade = CASE
                WHEN c.total_purchase_amount >= {$grades['a_plus']} THEN 'A+'
                WHEN c.total_purchase_amount >= {$grades['a']} THEN 'A'
                WHEN c.total_purchase_amount >= {$grades['b']} THEN 'B'
                WHEN c.total_purchase_amount >= {$grades['c']} THEN 'C'
                ELSE 'D'
            END
            WHERE c.is_active = 1
        ";
        
        $this->db->execute($sql);
    }
    
    private function updateTemperatureStatus() {
        // Update temperature based on recent activity and purchase history
        $sql = "
            UPDATE customers c
            SET temperature_status = CASE
                -- Hot: New customers or high-value regular buyers
                WHEN (c.created_at > DATE_SUB(NOW(), INTERVAL 30 DAY)) 
                     OR (c.customer_grade IN ('A+', 'A') AND 
                         EXISTS(SELECT 1 FROM orders o WHERE o.customer_id = c.customer_id 
                                AND o.order_date > DATE_SUB(NOW(), INTERVAL 60 DAY))) 
                THEN 'hot'
                
                -- Warm: Existing customers with irregular purchases
                WHEN EXISTS(SELECT 1 FROM orders o WHERE o.customer_id = c.customer_id 
                           AND o.order_date > DATE_SUB(NOW(), INTERVAL 180 DAY))
                THEN 'warm'
                
                -- Cold: Old customers with low activity
                WHEN EXISTS(SELECT 1 FROM orders o WHERE o.customer_id = c.customer_id)
                THEN 'cold'
                
                -- Frozen: Customers with rejection history or multiple transfers
                ELSE 'frozen'
            END
            WHERE c.is_active = 1
        ";
        
        $this->db->execute($sql);
    }
}
```

### 3. Data Cleanup Job
```php
<?php
// File: /cron/data_cleanup.php
// Run weekly: 0 3 * * 0 php /path/to/cron/data_cleanup.php

class DataCleanupJob {
    
    public function run() {
        $this->cleanupOldLogs();
        $this->updateStatistics();
        $this->optimizeTables();
    }
    
    private function cleanupOldLogs() {
        // Keep only 1 year of call logs
        $sql = "DELETE FROM call_logs WHERE created_at < DATE_SUB(NOW(), INTERVAL 1 YEAR)";
        $this->db->execute($sql);
        
        // Keep only 2 years of customer activities
        $sql = "DELETE FROM customer_activities WHERE created_at < DATE_SUB(NOW(), INTERVAL 2 YEAR)";
        $this->db->execute($sql);
    }
    
    private function updateStatistics() {
        // Update customer total purchase amounts
        $sql = "
            UPDATE customers c
            SET total_purchase_amount = (
                SELECT COALESCE(SUM(o.net_amount), 0)
                FROM orders o
                WHERE o.customer_id = c.customer_id
                AND o.payment_status = 'paid'
            )
        ";
        $this->db->execute($sql);
    }
}
```

### 4. Crontab Configuration
```bash
# /etc/crontab or user crontab
# Customer recall check - every hour
0 * * * * php /var/www/html/CRM/cron/customer_recall.php >> /var/log/crm_recall.log 2>&1

# Customer grade update - daily at 2 AM
0 2 * * * php /var/www/html/CRM/cron/update_customer_grades.php >> /var/log/crm_grades.log 2>&1

# Data cleanup - weekly on Sunday at 3 AM
0 3 * * 0 php /var/www/html/CRM/cron/data_cleanup.php >> /var/log/crm_cleanup.log 2>&1

# Database backup - daily at 1 AM
0 1 * * * mysqldump -u username -p password primacom_Customer > /backup/crm_backup_$(date +\%Y\%m\%d).sql
```

## ‡∏Ñ‡∏≠‡∏°‡πÇ‡∏û‡πÄ‡∏ô‡∏ô‡∏ï‡πå‡πÅ‡∏•‡∏∞‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ü‡∏ã

### 1. Authentication Service
```php
<?php
class AuthService {
    
    public function login($username, $password) {
        // Validate credentials
        // Set session
        // Log login activity
        // Return user data with permissions
    }
    
    public function checkPermission($user, $permission) {
        // Check if user role has required permission
    }
    
    public function logout() {
        // Clear session
        // Log logout activity
    }
}
```

### 2. Customer Service
```php
<?php
class CustomerService {
    
    public function assignCustomers($supervisorId, $telesalesId, $customerIds) {
        // Move customers from distribution basket to assigned
        // Update assignment history
        // Log activity
    }
    
    public function recallCustomer($customerId, $reason) {
        // Move customer to appropriate basket
        // Log recall reason
        // Update sales history
    }
    
    public function updateCustomerStatus($customerId, $status, $notes) {
        // Update customer status
        // Log activity
        // Set next followup if needed
    }
}
```

### 3. Order Service
```php
<?php
class OrderService {
    
    public function createOrder($customerId, $orderData) {
        // Create order and order details
        // Update customer purchase amount
        // Recalculate customer grade
        // Log activity
    }
    
    public function updateOrderStatus($orderId, $status) {
        // Update order status
        // Log activity
        // Send notifications if needed
    }
}
```

## ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î

### Error Handling Strategy
```php
<?php
class ErrorHandler {
    
    public function handleDatabaseError($error) {
        // Log error details
        // Return user-friendly message
        // Send alert to admin if critical
    }
    
    public function handleValidationError($errors) {
        // Format validation errors
        // Return structured response
    }
    
    public function handleSystemError($error) {
        // Log system error
        // Return generic error message
        // Alert system administrator
    }
}
```

## ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### 1. Unit Testing
- Test individual functions and methods
- Mock database connections
- Test business logic validation

### 2. Integration Testing
- Test API endpoints
- Test database operations
- Test cron job functionality

### 3. User Acceptance Testing
- Test complete user workflows
- Test role-based access control
- Test mobile responsiveness

### 4. Performance Testing
- Load testing with multiple concurrent users
- Database query optimization
- Response time monitoring

## ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û

### Database Optimization
```sql
-- Indexes for common queries
CREATE INDEX idx_customers_assigned_recall ON customers(assigned_to, recall_at);
CREATE INDEX idx_orders_customer_date ON orders(customer_id, order_date);
CREATE INDEX idx_call_logs_customer_date ON call_logs(customer_id, created_at);

-- Partitioning for large tables
ALTER TABLE call_logs PARTITION BY RANGE (YEAR(created_at)) (
    PARTITION p2024 VALUES LESS THAN (2025),
    PARTITION p2025 VALUES LESS THAN (2026),
    PARTITION p_future VALUES LESS THAN MAXVALUE
);
```

### Caching Strategy
```php
<?php
// Redis caching for frequently accessed data
class CacheService {
    
    public function cacheCustomerData($customerId, $data) {
        $this->redis->setex("customer:$customerId", 3600, json_encode($data));
    }
    
    public function getCachedCustomerData($customerId) {
        $cached = $this->redis->get("customer:$customerId");
        return $cached ? json_decode($cached, true) : null;
    }
}
```

‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡∏ó‡∏∏‡∏Å‡πÅ‡∏á‡πà‡∏°‡∏∏‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö CRM SalesTracker ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà UX/UI, ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á, ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Cron Jobs ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡πÅ‡∏•‡∏∞‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û