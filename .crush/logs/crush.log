{"time":"2025-08-06T21:06:11.9659606+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/config.loadProviders","file":"/home/runner/work/crush/crush/internal/config/provider.go","line":99},"msg":"Using cached provider data","path":"C:\\Users\\user\\AppData\\Local\\crush\\providers.json"}
{"time":"2025-08-06T21:06:11.9696693+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/config.loadProviders.func1","file":"/home/runner/work/crush/crush/internal/config/provider.go","line":103},"msg":"Updating provider cache in background"}
{"time":"2025-08-06T21:06:12.8745849+07:00","level":"INFO","msg":"OK   20250424200609_initial.sql (2.02ms)"}
{"time":"2025-08-06T21:06:12.8750911+07:00","level":"INFO","msg":"OK   20250515105448_add_summary_message_id.sql (506.2µs)"}
{"time":"2025-08-06T21:06:12.8756316+07:00","level":"INFO","msg":"OK   20250624000000_add_created_at_indexes.sql (0s)"}
{"time":"2025-08-06T21:06:12.8761616+07:00","level":"INFO","msg":"OK   20250627000000_add_provider_to_messages.sql (530µs)"}
{"time":"2025-08-06T21:06:12.8761616+07:00","level":"INFO","msg":"goose: successfully migrated database to version: 20250627000000"}
{"time":"2025-08-06T21:06:12.8761616+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/app.(*App).initLSPClients","file":"/home/runner/work/crush/crush/internal/app/lsp.go","line":18},"msg":"LSP clients initialization started in background"}
{"time":"2025-08-06T21:06:12.8820043+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":173},"msg":"Initializing agent tools","agent":"task"}
{"time":"2025-08-06T21:06:12.8825366+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1.1","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":175},"msg":"Initialized agent tools","agent":"task"}
{"time":"2025-08-06T21:06:12.8879825+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":173},"msg":"Initializing agent tools","agent":"coder"}
{"time":"2025-08-06T21:06:12.8879825+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1.1","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":175},"msg":"Initialized agent tools","agent":"coder"}
{"time":"2025-08-06T21:06:12.9389358+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/config.saveProvidersInCache","file":"/home/runner/work/crush/crush/internal/config/provider.go","line":48},"msg":"Saving cached provider data","path":"C:\\Users\\user\\AppData\\Local\\crush\\providers.json"}
{"time":"2025-08-06T21:06:15.595725+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":173},"msg":"Initializing agent tools","agent":"task"}
{"time":"2025-08-06T21:06:15.595725+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1.1","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":175},"msg":"Initialized agent tools","agent":"task"}
{"time":"2025-08-06T21:06:15.6070575+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":173},"msg":"Initializing agent tools","agent":"coder"}
{"time":"2025-08-06T21:06:15.6070575+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.NewAgent.func1.1","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":175},"msg":"Initialized agent tools","agent":"coder"}
{"time":"2025-08-06T21:07:55.0968476+07:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).shouldRetry","file":"/home/runner/work/crush/crush/internal/llm/provider/openai.go","line":516},"msg":"OpenAI API error","status_code":429,"message":"Rate limit exceeded: limit_rpm/qwen/qwen3-4b-04-28/2e98edb5-b21b-455b-afb4-d5c01aad515d. High demand for qwen/qwen3-4b:free on OpenRouter - limited to 1 requests per minute. Please retry shortly.","type":""}
{"time":"2025-08-06T21:07:55.0989216+07:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).stream.func1","file":"/home/runner/work/crush/crush/internal/llm/provider/openai.go","line":465},"msg":"Retrying due to rate limit","attempt":1,"max_retries":8}
{"time":"2025-08-06T21:08:29.0528351+07:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).shouldRetry","file":"/home/runner/work/crush/crush/internal/llm/provider/openai.go","line":516},"msg":"OpenAI API error","status_code":429,"message":"Rate limit exceeded: limit_rpm/qwen/qwen3-4b-04-28/2e98edb5-b21b-455b-afb4-d5c01aad515d. High demand for qwen/qwen3-4b:free on OpenRouter - limited to 1 requests per minute. Please retry shortly.","type":""}
{"time":"2025-08-06T21:08:29.0528351+07:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).stream.func1","file":"/home/runner/work/crush/crush/internal/llm/provider/openai.go","line":465},"msg":"Retrying due to rate limit","attempt":1,"max_retries":8}
{"time":"2025-08-06T21:08:36.835309+07:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).shouldRetry","file":"/home/runner/work/crush/crush/internal/llm/provider/openai.go","line":516},"msg":"OpenAI API error","status_code":429,"message":"Rate limit exceeded: limit_rpm/qwen/qwen3-4b-04-28/2e98edb5-b21b-455b-afb4-d5c01aad515d. High demand for qwen/qwen3-4b:free on OpenRouter - limited to 1 requests per minute. Please retry shortly.","type":""}
{"time":"2025-08-06T21:08:36.835309+07:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).stream.func1","file":"/home/runner/work/crush/crush/internal/llm/provider/openai.go","line":465},"msg":"Retrying due to rate limit","attempt":2,"max_retries":8}
{"time":"2025-08-06T21:08:46.8230643+07:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).shouldRetry","file":"/home/runner/work/crush/crush/internal/llm/provider/openai.go","line":516},"msg":"OpenAI API error","status_code":429,"message":"Rate limit exceeded: limit_rpm/qwen/qwen3-4b-04-28/2e98edb5-b21b-455b-afb4-d5c01aad515d. High demand for qwen/qwen3-4b:free on OpenRouter - limited to 1 requests per minute. Please retry shortly.","type":""}
{"time":"2025-08-06T21:08:46.8230643+07:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/provider.(*openaiClient).stream.func1","file":"/home/runner/work/crush/crush/internal/llm/provider/openai.go","line":465},"msg":"Retrying due to rate limit","attempt":3,"max_retries":8}
{"time":"2025-08-06T21:13:09.8434976+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).processEvent","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":627},"msg":"Tool call started","toolCall":{"id":"chatcmpl-tool-f643db91888646d3b95634130a636c10","name":"ls","input":"","type":"","finished":false}}
{"time":"2025-08-06T21:13:10.0485958+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).processEvent","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":627},"msg":"Tool call started","toolCall":{"id":"chatcmpl-tool-42f20909344443ff86dedf02994cfcca","name":"glob","input":"","type":"","finished":false}}
{"time":"2025-08-06T21:13:10.3560545+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).processEvent","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":627},"msg":"Tool call started","toolCall":{"id":"chatcmpl-tool-0e5040f05096485a966f0ad08c50e66b","name":"view","input":"","type":"","finished":false}}
{"time":"2025-08-06T21:13:10.76293+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).processEvent","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":627},"msg":"Tool call started","toolCall":{"id":"chatcmpl-tool-b684363f25804cb2b241b243b5850c97","name":"view","input":"","type":"","finished":false}}
{"time":"2025-08-06T21:13:10.977859+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).processEvent","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":627},"msg":"Tool call started","toolCall":{"id":"chatcmpl-tool-33ff20cd4f2d44eebc2ed2e7d7e37e7a","name":"view","input":"","type":"","finished":false}}
{"time":"2025-08-06T21:13:11.8222002+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).processEvent","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":627},"msg":"Tool call started","toolCall":{"id":"chatcmpl-tool-f548d0fc84f04aeb8d587c16481c22a6","name":"view","input":"","type":"","finished":false}}
{"time":"2025-08-06T21:13:11.823768+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).processEvent","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":627},"msg":"Tool call started","toolCall":{"id":"chatcmpl-tool-993f902f19164bc4aab6e1e94fbc96c1","name":"view","input":"","type":"","finished":false}}
{"time":"2025-08-06T21:13:12.1977954+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).processEvent","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":627},"msg":"Tool call started","toolCall":{"id":"chatcmpl-tool-99c250d3649640aba1c190c1d7aa33f1","name":"view","input":"","type":"","finished":false}}
{"time":"2025-08-06T21:13:12.5046868+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).processEvent","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":627},"msg":"Tool call started","toolCall":{"id":"chatcmpl-tool-339a8802dcd141db8cd543817714485b","name":"view","input":"","type":"","finished":false}}
{"time":"2025-08-06T21:13:12.9145916+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).processEvent","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":627},"msg":"Tool call started","toolCall":{"id":"chatcmpl-tool-7314dedd63a74e6fad2ca0089273f424","name":"view","input":"","type":"","finished":false}}
{"time":"2025-08-06T21:13:13.3237654+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).processEvent","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":627},"msg":"Tool call started","toolCall":{"id":"chatcmpl-tool-3c983ce1d3ac4e34886e6ec3ecc91012","name":"view","input":"","type":"","finished":false}}
{"time":"2025-08-06T21:13:13.5489878+07:00","level":"INFO","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).processEvent","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":627},"msg":"Tool call started","toolCall":{"id":"chatcmpl-tool-295dbc83561d4a91ba2ee5f0c61d8749","name":"view","input":"","type":"","finished":false}}
{"time":"2025-08-06T21:13:13.8836637+07:00","level":"WARN","source":{"function":"github.com/charmbracelet/crush/internal/llm/tools.init.func1","file":"/home/runner/work/crush/crush/internal/llm/tools/rg.go","line":18},"msg":"Ripgrep (rg) not found in $PATH. Some grep features might be limited or slower."}
{"time":"2025-08-06T21:13:14.7601353+07:00","level":"ERROR","source":{"function":"github.com/charmbracelet/crush/internal/llm/agent.(*agent).Run.func1","file":"/home/runner/work/crush/crush/internal/llm/agent/agent.go","line":347},"msg":"failed to process events: POST \"https://openrouter.ai/api/v1/chat/completions\": 400 Bad Request {\"message\":\"This endpoint's maximum context length is 40960 tokens. However, you requested about 52842 tokens (39301 of text input, 9445 of tool input, 4096 in the output). Please reduce the length of either one, or use the \\\"middle-out\\\" transform to compress your prompt automatically.\",\"code\":400,\"metadata\":{\"provider_name\":null}}"}
