# ขั้นตอนการทดสอบระบบ Import/Export

## 1. การทดสอบการดาวน์โหลด Template

### 1.1 ทดสอบ Template สำหรับนำเข้ายอดขาย
1. เข้าไปที่หน้า Import/Export
2. คลิกปุ่ม "ดาวน์โหลด Template" 
3. เลือกประเภท "Sales Import"
4. ดาวน์โหลดไฟล์ CSV
5. เปิดไฟล์ด้วย Excel หรือ Google Sheets
6. **ตรวจสอบว่า:**
   - ตัวอักษรไทยแสดงผลถูกต้อง (ไม่เป็นเครื่องหมายคำถาม)
   - มีคอลัมน์: ชื่อ, นามสกุล, เบอร์โทรศัพท์, อีเมล, ที่อยู่, ตำบล, อำเภอ, จังหวัด, รหัสไปรษณีย์, ชื่อสินค้า, จำนวน, ราคาต่อชิ้น, ยอดรวม, วันที่สั่งซื้อ, ช่องทางการขาย, หมายเหตุ
   - มีข้อมูลตัวอย่างในแถวที่ 2

### 1.2 ทดสอบ Template สำหรับเฉพาะรายชื่อ
1. คลิกปุ่ม "ดาวน์โหลด Template" อีกครั้ง
2. เลือกประเภท "Customers Only"
3. ดาวน์โหลดไฟล์ CSV
4. เปิดไฟล์ด้วย Excel หรือ Google Sheets
5. **ตรวจสอบว่า:**
   - ตัวอักษรไทยแสดงผลถูกต้อง
   - มีคอลัมน์: ชื่อ, นามสกุล, เบอร์โทรศัพท์, อีเมล, ที่อยู่, ตำบล, อำเภอ, จังหวัด, รหัสไปรษณีย์, หมายเหตุ
   - มีข้อมูลตัวอย่างในแถวที่ 2

### 1.3 ทดสอบ Template ทั่วไป
1. คลิกปุ่ม "ดาวน์โหลด Template" อีกครั้ง
2. เลือกประเภท "Customers" (หรือไม่เลือก)
3. ดาวน์โหลดไฟล์ CSV
4. เปิดไฟล์ด้วย Excel หรือ Google Sheets
5. **ตรวจสอบว่า:**
   - ตัวอักษรไทยแสดงผลถูกต้อง
   - มีคอลัมน์: ชื่อ, นามสกุล, เบอร์โทรศัพท์, อีเมล, ที่อยู่, ตำบล, อำเภอ, จังหวัด, รหัสไปรษณีย์, สถานะ, อุณหภูมิ, เกรด, หมายเหตุ

## 2. การทดสอบการนำเข้าข้อมูล

### 2.1 ทดสอบการนำเข้ายอดขาย (Sales Import)

#### 2.1.1 ทดสอบลูกค้าใหม่
1. สร้างไฟล์ CSV ตาม Template Sales Import
2. เพิ่มข้อมูลลูกค้าใหม่:
   ```
   ชื่อ: ทดสอบ
   นามสกุล: ระบบ
   เบอร์โทรศัพท์: 0812345678
   อีเมล: test@example.com
   ที่อยู่: 123 ถ.ทดสอบ
   ตำบล: ทดสอบ
   อำเภอ: ทดสอบ
   จังหวัด: กรุงเทพฯ
   รหัสไปรษณีย์: 10110
   ชื่อสินค้า: สินค้าทดสอบ
   จำนวน: 2
   ราคาต่อชิ้น: 1500
   ยอดรวม: 3000
   วันที่สั่งซื้อ: 2025-01-15
   ช่องทางการขาย: TikTok
   หมายเหตุ: ลูกค้าใหม่
   ```
3. อัปโหลดไฟล์ในหน้า Import/Export
4. เลือกประเภท "Sales Import"
5. คลิกปุ่ม "นำเข้าข้อมูล"
6. **ตรวจสอบว่า:**
   - แสดงข้อความ "นำเข้าข้อมูลสำเร็จ"
   - ลูกค้าถูกสร้างใหม่ในระบบ
   - คำสั่งซื้อถูกสร้างใหม่
   - ยอดซื้อรวมของลูกค้าถูกอัปเดต

#### 2.1.2 ทดสอบลูกค้าเก่า
1. สร้างไฟล์ CSV ใหม่
2. ใช้เบอร์โทรศัพท์ของลูกค้าที่มีอยู่แล้วในระบบ
3. เพิ่มข้อมูลการขายใหม่
4. อัปโหลดและนำเข้าข้อมูล
5. **ตรวจสอบว่า:**
   - ไม่สร้างลูกค้าใหม่
   - อัปเดตประวัติการซื้อของลูกค้าเดิม
   - เพิ่มคำสั่งซื้อใหม่ให้ลูกค้าเดิม
   - ยอดซื้อรวมถูกอัปเดต

### 2.2 ทดสอบการนำเข้าเฉพาะรายชื่อ (Customers Only)

#### 2.2.1 ทดสอบลูกค้าใหม่
1. สร้างไฟล์ CSV ตาม Template Customers Only
2. เพิ่มข้อมูลลูกค้าใหม่:
   ```
   ชื่อ: ทดสอบ
   นามสกุล: รายชื่อ
   เบอร์โทรศัพท์: 0898765432
   อีเมล: test2@example.com
   ที่อยู่: 456 ถ.ทดสอบ
   ตำบล: ทดสอบ
   อำเภอ: ทดสอบ
   จังหวัด: กรุงเทพฯ
   รหัสไปรษณีย์: 10110
   หมายเหตุ: ลูกค้าจาก Facebook
   ```
3. อัปโหลดไฟล์ในหน้า Import/Export
4. เลือกประเภท "Customers Only"
5. คลิกปุ่ม "นำเข้าข้อมูล"
6. **ตรวจสอบว่า:**
   - แสดงข้อความ "นำเข้าข้อมูลสำเร็จ"
   - ลูกค้าถูกสร้างใหม่ในระบบ
   - ไม่มีคำสั่งซื้อถูกสร้าง
   - ลูกค้าถูกเพิ่มในตะกร้า "distribution"

#### 2.2.2 ทดสอบลูกค้าที่มีอยู่แล้ว
1. สร้างไฟล์ CSV ใหม่
2. ใช้ชื่อหรือเบอร์โทรศัพท์ของลูกค้าที่มีอยู่แล้ว
3. อัปโหลดและนำเข้าข้อมูล
4. **ตรวจสอบว่า:**
   - แสดงข้อความ "ข้ามลูกค้าที่มีอยู่แล้ว"
   - ไม่สร้างลูกค้าใหม่
   - ไม่เปลี่ยนแปลงข้อมูลลูกค้าเดิม

### 2.3 ทดสอบการนำเข้าทั่วไป (Customers)
1. สร้างไฟล์ CSV ตาม Template ทั่วไป
2. เพิ่มข้อมูลลูกค้าใหม่
3. อัปโหลดและนำเข้าข้อมูล
4. **ตรวจสอบว่า:**
   - ลูกค้าถูกสร้างใหม่ในระบบ
   - ข้อมูลถูกบันทึกตามที่ระบุในไฟล์

## 3. การทดสอบการส่งออกข้อมูล

### 3.1 ทดสอบการส่งออกรายชื่อลูกค้า
1. ไปที่หน้า Import/Export
2. เลือกตัวกรอง (ถ้ามี):
   - สถานะลูกค้า
   - อุณหภูมิ
   - เกรด
   - ประเภทตะกร้า
3. คลิกปุ่ม "ส่งออกรายชื่อลูกค้า"
4. ดาวน์โหลดไฟล์ CSV
5. เปิดไฟล์ด้วย Excel หรือ Google Sheets
6. **ตรวจสอบว่า:**
   - ตัวอักษรไทยแสดงผลถูกต้อง
   - มีคอลัมน์: ID, ชื่อ, นามสกุล, เบอร์โทรศัพท์, อีเมล, ที่อยู่, ตำบล, อำเภอ, จังหวัด, รหัสไปรษณีย์, สถานะ, อุณหภูมิ, เกรด, ประเภทตะกร้า, ยอดซื้อรวม, วันที่สร้าง, วันที่อัปเดต
   - ข้อมูลถูกกรองตามที่เลือก

### 3.2 ทดสอบการส่งออกคำสั่งซื้อ
1. ไปที่หน้า Import/Export
2. เลือกตัวกรอง (ถ้ามี):
   - สถานะการจัดส่ง
   - ช่วงวันที่
3. คลิกปุ่ม "ส่งออกคำสั่งซื้อ"
4. ดาวน์โหลดไฟล์ CSV
5. เปิดไฟล์ด้วย Excel หรือ Google Sheets
6. **ตรวจสอบว่า:**
   - ตัวอักษรไทยแสดงผลถูกต้อง
   - มีคอลัมน์: ID, ลูกค้า, เบอร์โทรศัพท์, หมายเลขคำสั่งซื้อ, ยอดรวม, ส่วนลด, ยอดสุทธิ, สถานะการชำระ, สถานะการจัดส่ง, ผู้สร้าง, วันที่สร้าง
   - ข้อมูลถูกกรองตามที่เลือก

## 4. การทดสอบข้อผิดพลาด

### 4.1 ทดสอบไฟล์ไม่ถูกต้อง
1. สร้างไฟล์ CSV ที่ไม่มีคอลัมน์ที่จำเป็น
2. อัปโหลดไฟล์
3. **ตรวจสอบว่า:**
   - แสดงข้อความแจ้งเตือนข้อผิดพลาด
   - ไม่นำเข้าข้อมูล

### 4.2 ทดสอบข้อมูลไม่ครบ
1. สร้างไฟล์ CSV ที่มีแถวข้อมูลไม่ครบ (เช่น ไม่มีชื่อหรือเบอร์โทรศัพท์)
2. อัปโหลดไฟล์
3. **ตรวจสอบว่า:**
   - แสดงข้อความแจ้งเตือนข้อผิดพลาดสำหรับแถวที่ไม่ครบ
   - นำเข้าข้อมูลที่ถูกต้องเท่านั้น

### 4.3 ทดสอบไฟล์ขนาดใหญ่
1. สร้างไฟล์ CSV ที่มีข้อมูลจำนวนมาก (เช่น 1,000 แถว)
2. อัปโหลดไฟล์
3. **ตรวจสอบว่า:**
   - ระบบสามารถประมวลผลได้
   - ไม่เกิด timeout
   - แสดงผลการประมวลผลที่ถูกต้อง

## 5. การทดสอบประสิทธิภาพ

### 5.1 ทดสอบความเร็ว
1. วัดเวลาที่ใช้ในการนำเข้าข้อมูล 100 แถว
2. วัดเวลาที่ใช้ในการส่งออกข้อมูล 1,000 แถว
3. **ตรวจสอบว่า:**
   - เวลาที่ใช้อยู่ในเกณฑ์ที่ยอมรับได้
   - ไม่เกิดข้อผิดพลาด

### 5.2 ทดสอบการใช้หน่วยความจำ
1. เปิด Task Manager หรือ Activity Monitor
2. ทำการนำเข้าข้อมูลจำนวนมาก
3. **ตรวจสอบว่า:**
   - การใช้หน่วยความจำไม่เกินขีดจำกัด
   - หน่วยความจำถูกปล่อยหลังจากเสร็จสิ้น

## 6. การทดสอบความปลอดภัย

### 6.1 ทดสอบการตรวจสอบไฟล์
1. ลองอัปโหลดไฟล์ที่ไม่ใช่ CSV
2. **ตรวจสอบว่า:**
   - ระบบปฏิเสธไฟล์ที่ไม่ถูกต้อง
   - แสดงข้อความแจ้งเตือนที่เหมาะสม

### 6.2 ทดสอบการป้องกัน SQL Injection
1. สร้างไฟล์ CSV ที่มีข้อมูลพิเศษ (เช่น SQL commands)
2. อัปโหลดไฟล์
3. **ตรวจสอบว่า:**
   - ข้อมูลถูก escape อย่างถูกต้อง
   - ไม่เกิดข้อผิดพลาดในฐานข้อมูล

## 7. การทดสอบการทำงานร่วมกัน

### 7.1 ทดสอบการทำงานร่วมกับระบบอื่น
1. นำเข้าข้อมูลลูกค้าใหม่
2. ไปที่หน้าลูกค้าและตรวจสอบข้อมูล
3. ไปที่หน้าคำสั่งซื้อและตรวจสอบข้อมูล
4. **ตรวจสอบว่า:**
   - ข้อมูลแสดงผลถูกต้องในทุกหน้า
   - การเชื่อมโยงระหว่างตารางทำงานถูกต้อง

### 7.2 ทดสอบการทำงานร่วมกับระบบ Workflow
1. นำเข้าข้อมูลลูกค้าใหม่
2. ตรวจสอบว่าลูกค้าถูกเพิ่มในตะกร้า distribution
3. **ตรวจสอบว่า:**
   - ระบบ Workflow สามารถจัดการลูกค้าใหม่ได้
   - การต่อเวลาอัตโนมัติทำงานถูกต้อง

## 8. การทดสอบการกู้คืน

### 8.1 ทดสอบการกู้คืนจากข้อผิดพลาด
1. สร้างสถานการณ์ที่ทำให้การนำเข้าล้มเหลว (เช่น ปิดการเชื่อมต่อฐานข้อมูล)
2. ลองนำเข้าข้อมูล
3. **ตรวจสอบว่า:**
   - ระบบจัดการข้อผิดพลาดอย่างเหมาะสม
   - ไม่มีข้อมูลเสียหาย
   - สามารถลองใหม่ได้

## 9. การทดสอบการใช้งานจริง

### 9.1 ทดสอบการใช้งานโดยผู้ใช้จริง
1. ให้ผู้ใช้จริงทดสอบการนำเข้าข้อมูล
2. สังเกตการใช้งานและปัญหาที่เกิดขึ้น
3. **ตรวจสอบว่า:**
   - ผู้ใช้สามารถใช้งานได้ง่าย
   - ไม่มีปัญหาที่คาดไม่ถึง

### 9.2 ทดสอบการใช้งานในสภาพแวดล้อมจริง
1. ทดสอบในสภาพแวดล้อมที่มีข้อมูลจริง
2. **ตรวจสอบว่า:**
   - ระบบทำงานได้ในสภาพแวดล้อมจริง
   - ไม่มีปัญหากับข้อมูลที่มีอยู่

## 10. การบันทึกผลการทดสอบ

### 10.1 บันทึกผลการทดสอบ
1. บันทึกผลการทดสอบแต่ละขั้นตอน
2. บันทึกปัญหาที่พบ
3. บันทึกข้อเสนอแนะในการปรับปรุง

### 10.2 สรุปผลการทดสอบ
1. สรุปผลการทดสอบโดยรวม
2. ระบุปัญหาที่ต้องแก้ไข
3. ระบุฟีเจอร์ที่ทำงานได้ดี

---

**หมายเหตุ:** การทดสอบเหล่านี้ควรทำในสภาพแวดล้อมทดสอบก่อนนำไปใช้จริง และควรทำการทดสอบซ้ำหลังจากมีการแก้ไขหรือปรับปรุงระบบ 